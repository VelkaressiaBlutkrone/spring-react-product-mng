# 제품 관리 시스템 PRD (Product Requirements Document)

## 1. 서버 (Backend)

### 1-1) 상품에 대한 추가/수정/삭제

#### 기능 요구사항
- **상품 추가 (CREATE)**
  - 상품 정보 입력을 통한 신규 상품 등록
  - 필수 필드: 상품코드(productCode), 상품명(productName), 카테고리(category)
  - 선택 필드: 설명(description), 상태(status)

- **상품 수정 (UPDATE)**
  - 기존 상품 정보 변경
  - 상품코드는 수정 불가 (유일성 보장)
  - 수정 이력 추적 가능하도록 구성

- **상품 삭제 (DELETE)**
  - 상품 정보 삭제
  - 연관된 재고, 옵션, 가격 이력 등과의 관계 고려 (Soft Delete 또는 Cascade 처리)
  - 삭제 전 검증 로직 필수

#### API 엔드포인트
- `POST /api/products` - 상품 추가
- `PUT /api/products/{id}` - 상품 수정
- `DELETE /api/products/{id}` - 상품 삭제

### 1-2) Domain Entity 구성

#### 기존 Entity 활용
- **Product**: 상품 기본 정보 관리
  - 필드: productId, productCode, productName, description, category, status
  - BaseTimeEntity 상속으로 생성일시/수정일시 자동 관리

- **Category**: 상품 카테고리 정보
  - 필드: categoryId, categoryName, parent, depth, sortOrder
  - 계층형 카테고리 구조 지원

- **Inventory**: 상품 재고 정보
  - 필드: inventoryId, product, quantity, warehouseCode
  - 상품과 1:N 관계

- **ProductOption**: 상품 옵션 정보
  - 필드: optionId, product, optionName, optionValue
  - 상품의 다양한 옵션 관리

- **PriceHistory**: 상품 가격 이력
  - 필드: priceId, product, price, startDate, endDate
  - 가격 변경 이력 추적 및 통계 활용

#### 추가 Entity (필요 시)

**ProductChangeLog** (변경 이력 추적용)
- **추가 이유**: 상품 정보 변경 이력을 체계적으로 관리하여 메인 화면의 변경 이력 표시 및 통계 기능에 활용
- 필드:
  - changeLogId (PK)
  - product (FK)
  - changeType (추가/수정/삭제)
  - changedField (변경된 필드명)
  - oldValue (이전 값)
  - newValue (변경 값)
  - changedBy (변경자)
  - changedDate (변경 일시)

### 1-3) 상품 조회 기능

#### 검색 조건
- **상품명 검색**: 상품명 부분 일치 검색 (LIKE 검색)
- **상품코드 검색**: 상품코드 정확 일치 또는 부분 일치 검색
- **가격 범위 검색**: 최소 가격 ~ 최대 가격 범위로 검색
  - PriceHistory의 현재 유효한 가격 기준
  - endDate가 null이거나 미래인 가격 레코드 사용

#### 정렬
- 기본 정렬: 등록 날짜(createdDate) 기준 내림차순 (최신순)
- 정렬 필드 변경 가능 (필요 시)

#### 페이징
- Spring Data JPA의 Pageable 인터페이스 활용
- 기본 페이지 크기: 10개
- 페이지 번호, 페이지 크기 파라미터로 전달 가능
- 페이징 정보 응답에 포함 (전체 개수, 전체 페이지 수 등)

#### API 엔드포인트
- `GET /api/products?page={page}&size={size}&productName={name}&productCode={code}&minPrice={min}&maxPrice={max}`

### 1-4) 로그 기능

#### 로깅 요구사항
- **이벤트 호출 로그**: 모든 API 엔드포인트 호출 시 로그 기록
  - 요청 URL, HTTP Method, 요청 파라미터, 요청 시간
  - 응답 상태 코드, 응답 시간, 처리 소요 시간

- **데이터 이동 로그**: 데이터베이스 조회/저장/수정/삭제 시 상세 로그
  - 쿼리 실행 정보 (선택적)
  - 데이터 변경 전/후 값 비교 (수정/삭제 시)
  - 영향받은 레코드 수

- **예외 발생 로그**: 예외 발생 시 추적 가능한 상세 정보
  - 예외 타입 및 메시지
  - 스택 트레이스
  - 발생 위치 (클래스명, 메서드명, 라인 번호)
  - 요청 정보 (URL, 파라미터, 사용자 정보 등)
  - 에러 코드 및 에러 응답 정보

#### 로깅 구현 방안
- **Logback** 사용 (이미 logback-spring.xml 설정 파일 존재)
- 로그 레벨: INFO (일반 이벤트), DEBUG (상세 정보), ERROR (예외)
- 로그 출력 형식: JSON 형식으로 구조화하여 로그 수집 시스템 연동 용이
- 로그 파일: application.log (일반 로그), error.log (에러 로그)
- 로그 로테이션: 일별 또는 크기 기준 로테이션

#### AOP(Aspect-Oriented Programming) 활용
- `@Around` 어노테이션을 사용한 메서드 실행 전후 로깅
- Service 레이어 메서드 실행 시 자동 로깅
- Controller 레이어 요청/응답 로깅

## 2. 클라이언트 (Frontend)

### 2-0) 디자인 원칙

#### 디자인 가이드
- **심플한 디자인**: 불필요한 장식 요소 제거, 깔끔한 레이아웃
- **UX 우선**: 사용자의 편의성과 직관적인 인터랙션 우선
- **모바일 대응**: 반응형 디자인으로 모바일/태블릿/데스크톱 모두 지원
  - 모바일 퍼스트 접근
  - Breakpoint: sm (640px), md (768px), lg (1024px), xl (1280px)

#### UI/UX 구성
- **컬러 팔레트**: 브랜드 컬러 기반의 통일된 컬러 시스템
- **타이포그래피**: 가독성 높은 폰트 크기 및 행간
- **간격**: 일관된 spacing 시스템 (Tailwind CSS spacing scale 활용)
- **컴포넌트**: 재사용 가능한 공통 컴포넌트 설계

### 2-1) 메뉴 화면 구성

#### 네비게이션 구조
- **메인 화면** (`/`): 대시보드 형태로 최근 활동 요약
- **목록 화면** (`/products`): 상품 목록 조회 및 관리
- **통계 화면** (`/statistics`): 상품 통계 및 그래프
- **About 화면** (`/about`): 시스템 정보 및 연락처

#### 공통 레이아웃
- 상단 헤더: 로고, 메뉴 네비게이션, 사용자 정보
- 좌측 사이드바 (데스크톱) / 하단 네비게이션 바 (모바일)
- 메인 컨텐츠 영역
- 하단 푸터 (선택사항)

### 2-2) React 및 Node 패키지 활용

#### 현재 설치된 패키지
- **react, react-dom**: React 라이브러리
- **react-router-dom**: 라우팅 관리
- **axios**: HTTP 클라이언트
- **@tanstack/react-query**: 서버 상태 관리 및 캐싱
- **react-hook-form**: 폼 관리
- **zod**: 스키마 검증
- **zustand**: 클라이언트 상태 관리
- **tailwindcss**: 유틸리티 기반 CSS 프레임워크
- **clsx, tailwind-merge**: 클래스명 동적 관리

#### 추가 설치 패키지 (필요 시)

**recharts** 또는 **@nivo/core**
- **설치 이유**: 통계 화면의 그래프 표시를 위해 차트 라이브러리 필요
- **선택 근거**: 
  - recharts: React와의 통합이 용이하고 커스터마이징이 쉬움
  - @nivo: 더 다양한 차트 타입 제공, 애니메이션 지원

**date-fns**
- **설치 이유**: 날짜/시간 포맷팅 및 조작이 빈번하게 필요 (등록일, 통계 기간 등)
- **선택 근거**: 가볍고 Tree-shaking이 잘 되어 번들 크기 최적화에 유리

**react-icons**
- **설치 이유**: 일관된 아이콘 디자인을 위한 아이콘 라이브러리
- **선택 근거**: 다양한 아이콘 세트 제공, 간편한 사용법

### 2-3) 목록 화면

#### 기능 요구사항
- **상품 목록 표시**
  - 페이징된 상품 목록을 카드 형태 또는 테이블 형태로 표시
  - 표시 정보: 상품 이미지(있을 경우), 상품코드, 상품명, 가격, 상태, 등록일
  - 반응형 그리드 레이아웃 (모바일: 1열, 태블릿: 2열, 데스크톱: 3-4열)

- **검색 및 필터**
  - 상단 검색 바: 상품명/상품코드 검색
  - 가격 범위 필터 (슬라이더 또는 입력 필드)
  - 검색 결과 실시간 표시 (debounce 적용)

- **페이징**
  - 페이지 번호, 이전/다음 버튼
  - 페이지 크기 선택 옵션 (10/20/50개)
  - 전체 개수 표시

- **상품 추가**
  - "새로 추가" 버튼 (우측 상단 또는 목록 상단)
  - 클릭 시 상품 등록 모달 또는 페이지로 이동
  - react-hook-form과 zod를 활용한 폼 검증

- **상품 상세 보기**
  - 목록에서 상품 카드/행 클릭 시 상세 모달 또는 상세 페이지로 이동
  - 상세 정보: 모든 상품 정보, 재고 정보, 가격 이력, 옵션 정보

- **상품 수정**
  - 상세 화면에서 "수정" 버튼
  - 수정 모드로 전환하여 정보 변경 가능
  - 수정 완료 시 목록 자동 갱신

- **상품 삭제**
  - 상세 화면에서 "삭제" 버튼
  - 삭제 확인 다이얼로그 표시
  - 삭제 완료 시 목록에서 제거

### 2-4) 메인 화면

#### 기능 요구사항
- **최근 추가된 항목**
  - 최근 5-10개 상품 목록 표시
  - 상품명, 상품코드, 등록일 간략 표시
  - 클릭 시 상세 화면으로 이동

- **변경 이력 정보**
  - 최근 변경된 상품 목록 표시
  - 변경 타입 표시 (추가/수정/삭제)
  - 변경된 필드 및 변경 내용 간략 표시
  - 변경 일시 표시

- **대시보드 위젯**
  - 전체 상품 수
  - 오늘 추가된 상품 수
  - 이번 주 변경된 상품 수
  - 통계 요약 (간단한 차트 또는 숫자)

- **빠른 액션**
  - 상품 추가 바로가기
  - 상품 목록 바로가기
  - 통계 보기 바로가기

### 2-5) 통계 화면

#### 기능 요구사항
- **기간 선택**
  - 매주/매월/분기/년별 탭 또는 드롭다운
  - 시작일/종료일 커스텀 선택 가능
  - 날짜 범위 피커 (date-fns 활용)

- **통계 목록**
  - 선택한 기간 동안 추가/수정/삭제된 상품 목록
  - 변경 타입별 필터링 가능
  - 상품 정보 및 변경 내용 표시

- **통계 그래프**
  - **추가/수정/삭제 트렌드**: 기간별 상품 변경 건수 추이 (라인 차트)
  - **카테고리별 분포**: 카테고리별 상품 수 분포 (파이 차트 또는 바 차트)
  - **가격 분포**: 가격대별 상품 수 분포 (히스토그램)
  - **월별 추가 추이**: 월별 신규 상품 추가 건수 (바 차트)

- **통계 요약 카드**
  - 총 추가 건수
  - 총 수정 건수
  - 총 삭제 건수
  - 평균 가격
  - 최고 가격 / 최저 가격

### 2-6) About 페이지

#### 표시 정보
- **시스템 정보**
  - 애플리케이션 이름
  - 버전 정보 (package.json의 version 기반)
  - 빌드 날짜
  - 기술 스택 정보

- **연락 정보**
  - 개발팀 연락처
  - 이메일
  - 깃허브 레포지토리 링크 (있는 경우)

- **기타 정보**
  - 라이선스 정보
  - 기여자 정보
  - 변경 이력 (CHANGELOG 링크)

#### 디자인
- 심플하고 깔끔한 정보 전달 중심
- 카드 형태로 정보 섹션 구분
- 모바일에서도 읽기 편한 레이아웃

## 3. 기술 스택 요약

### Backend
- Spring Boot 3.x
- Spring Data JPA
- QueryDSL (동적 쿼리)
- Logback (로깅)
- MySQL/PostgreSQL (데이터베이스)

### Frontend
- React 19
- TypeScript
- Vite (빌드 도구)
- Tailwind CSS 4 (스타일링)
- React Router DOM (라우팅)
- TanStack Query (서버 상태 관리)
- Zustand (클라이언트 상태 관리)
- React Hook Form + Zod (폼 관리 및 검증)
- Axios (HTTP 클라이언트)

## 4. 구현 우선순위

### Phase 1 (핵심 기능)
1. 서버: 상품 CRUD API 구현
2. 서버: 상품 조회 API (검색, 페이징, 정렬)
3. 클라이언트: 기본 레이아웃 및 라우팅
4. 클라이언트: 목록 화면 기본 구현

### Phase 2 (추가 기능)
5. 서버: 로깅 기능 구현
6. 클라이언트: 상품 추가/수정/삭제 UI
7. 클라이언트: 메인 화면 구현
8. 클라이언트: About 페이지 구현

### Phase 3 (고급 기능)
9. 서버: 변경 이력 Entity 및 API 구현
10. 클라이언트: 통계 화면 구현
11. 클라이언트: 반응형 디자인 최적화
12. 클라이언트: 에러 처리 및 사용자 피드백 강화
